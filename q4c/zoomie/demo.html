<div ng-app="myApp" ng-controller="myController" class="rhizome" align="center">
    <div ng-bind="questionnaire.name.text" class="label"></div>
    <svg version="1.1" id="svgpanel" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0" y="0" width="250" height="250" viewBox="0 0 250 250" rhiz-svg-panel>
        <defs>
            <marker id="markerArrow" markerWidth="13" markerHeight="13" refx="2" refy="6" orient="auto">
                <path d="M2,2 L2,8 L7,6 L2,4" />
            </marker>
        </defs>
        <rect id="question1" width="100" height="100" x="10" y="10" class="frame" />
        <g transform="translate(45 48)">
        <rect rx="3" ry="3" width="25" height="14" style="fill:none;stroke: #3f829f;stroke-width:2;opacity:0.5" />
            <path d="M25,6 L40,6" style="stroke: black; stroke-width:2; fill: none;marker-end: url(#markerArrow);" />
            <text x="7" y="10" color="violet" font-size="10">No</text>
         </g>
        <g transform="translate(45 66)">
            <rect rx="3" ry="3" width="25" height="14" style="fill:none;stroke: #3f829f;stroke-width:2;opacity:0.5" />
            <path d="M13,15 L13,19" style="stroke: black; stroke-width:2; fill: none;marker-end: url(#markerArrow);" />
            <text x="5" y="10" font-size="10">Yes</text>
         </g>
        <text x="20" y="40" font-size="10">Are you a patient?</text>
        <rect id="question2" width="100" height="100" x="20" y="97" class="frame" />
        <text font-size="9" x="22" y="120">Are you male or female?</text>
        <g transform="translate(43 127)">
        <rect rx="3" ry="3" width="36" height="13" style="fill:none;stroke: #3f829f;stroke-width:2;opacity:0.5" />
            <path d="M36,6 L46,6" style="stroke: black; stroke-width:2; fill: none;marker-end: url(#markerArrow);" />
            <text x="5" y="10" font-size="9">Female</text>
         </g>
        <g transform="translate(43 144)">
            <rect rx="3" ry="3" width="36" height="13" style="fill:none;stroke: #3f829f;stroke-width:2;opacity:0.5" />
            <path d="M15,14 L15,19" style="stroke: black; stroke-width:2; fill: none;marker-end: url(#markerArrow);" />
            <text x="7" y="10" font-size="9">Male</text>
         </g>
     <rect id="question3" width="100" height="100" x="100" y="10" class="frame" />
            <rect x="113" y="35" rx="3" ry="3" width="80" height="50" style="fill:none;stroke:#c79b18;stroke-width:2;opacity:0.5" />
        <text x="121" y="51" font-size="9">Family member.
            <tspan x="121" y="61">There are no</tspan>
            <tspan x="121" y="71">further questions.</tspan>
        </text>
        <rect id="question4" width="100" height="100" x="111" y="90" class="frame" />
        <rect x="122" y="118" rx="3" ry="3" width="80" height="44" style="fill:none;stroke:#d22908;stroke-width:2;opacity:0.5" />
        <text x="135" y="134" font-size="8">Female patient.
            <tspan x="132" y="142">Continue on with</tspan>
            <tspan x="130" y="150">questions about risk.</tspan>
        </text>
        <rect id="question5" width="100" height="100" x="10" y="173" class="frame" />
        <rect x="20" y="198" rx="3" ry="3" width="80" height="44" style="fill:none;stroke:#d22908;stroke-width:2;opacity:0.5" />
        <text x="36" y="212" font-size="8">Male patient.
            <tspan x="31" y="222">Continue on with</tspan>
            <tspan x="29" y="232">questions about age.</tspan>
        </text>
    </svg>
    <div id="quiz">
        <ol id="questions" class="buttonlist">
            <li ng-repeat="question in group.question">
                <div class="question" ng-bind="question.text"></div>
                <ol id="options" class="buttonlist">
                    <li ng-repeat="option in getOptions(question.options.reference)">
                        <button class="buttonface" ng-click="loadGroup(question, option.code, option.system)" ng-bind="option.display"></button>
                    </li>
                </ol>
            </li>
        </ol>
        <!-- <div ng-bind="group.text"></div> -->
        <button class="buttonface" ng-click="loadQuestionnaire()">(Re)start Questionnaire</button>
    </div>
</div>
<div class="theory">
    <p>Resource-based Health Information Zone for the Mobile Enterprise</p>
    <p>Rhizome is a library of services and directives I have built using AngularJS. The idea here is to create a set of client-side components that will support application development for the Healthcare industry.</p>
    <p>The Rhizome: Questions4Care application shown here demonstrates how a Questionnaire application can use both machine-readable elements, like codes and code systems, and human-readable elements, like PDF and Scalable Vector Graphics (SVG).</p>
    <p>Rhizome makes ample use of an emerging Health Information standard called HL7 Fast Healthcare Information Resources (FHIR), which support interoperability through a resource-based approach to JSON- and XML-messaging.</p>
    <p>Health interoperability often relies on this combined notion of human- and machine-readable content. Typically, HL7 FHIR resources use HTML5 for the human-readable portion, but you could use an image like a JPEG or PNG, and in this case, I have used SVG, which allows me to use a JavaScript library called SnapSVG to animate the questionnaire whenever coded questions are answered.</p>
</div>
<!-- this is necessary because github cannot provide External Resources -->
<script src="//cdn.jsdelivr.net/snap.svg/0.3.0/snap.svg-min.js"></script>
